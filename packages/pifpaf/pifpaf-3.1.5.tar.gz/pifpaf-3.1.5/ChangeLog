CHANGES
=======

3.1.5
-----

* fix: do not block when process exits not correctly

3.1.4
-----

* fix: typo in stdout handling

3.1.3
-----

* fix: typo in stdout handling
* fix: remove universal tag since Python 2 is not supported anymore

3.1.2
-----

* fix: close devnull
* fix: do not leave zombie process

3.1.1
-----

* Fix broken Ceph config formatting
* chore: compress image

3.1.0
-----

* Add Ceph Nautilus and later support
* ceph: set limit for max open fds
* Add TLS\_ENABLED environment var for memcached

3.0.0
-----

* Add Python 3.7 and 3.8 to classifier
* Fix import ordering
* Remove Python 2.x support and six
* Fix zookeeper driver
* Disable aodh for py27 too
* Tidy up tox.ini and update kafka
* Fix tests and add recent Python releases

2.6.0
-----

* Try to fix PEP8 again
* Various fixes
* Add a driver for httpbin
* Update README.rst : Fix typo access
* fix: log info, not error when command is ready

2.5.0
-----

* Fixes flake8 warning and adds missing comma
* Apply suggestions from code review
* Add TLS params to memcached
* Add ceph-manager support
* Add Ceph config options for small disks

2.4.0
-----

* Ensure everything is terminated before exiting

2.3.0
-----

* qdrouterd: fix connector host address
* new kafka URL

2.2.2
-----

* postgresql: fix encoding of pgctl path

2.2.1
-----

* stdin expecting bytes instead of str

2.2.0
-----

* Implements apache qpid-dispatch-router driver
* tests: switch to kafka 1.0.2
* postgresql: add a --sync/--no-sync option
* Update to Mergify v2
* gnocchi: fix escape sequence
* Remove Python 3.5 support
* pep8: disable W503 and W504
* Implements apache artemis driver

2.1.2
-----

* Setup 2 partitions per topic
* pep8: enable flake8-logging-format
* fix py3 flake8 error
* gnocchi: Don't install outdated version
* tests: Remove s3srv testing
* ceph: Allow to delete pool
* Add .mergify.yml

2.1.1
-----

* Remove print statement

2.1.0
-----

* ceph: allow to run luminuous

2.0.7
-----

* Fix pep8 in test\_cli
* Fix command not found error in Python 3

2.0.6
-----

* make gnocchi use given port

2.0.5
-----

* Fix s3rver for latest version

2.0.4
-----

* Revert "wait the pifpaf process termination in fork mode"

2.0.3
-----

* Use last ceph lts
* gnocchi: use gnocchi-api binary when possible
* wait the pifpaf process termination in fork mode

2.0.2
-----

* Fix exception handling
* swift: use all needed workers

2.0.1
-----

* Fix exit code not being propagated

2.0.0
-----

* Replace cliff by click

1.12.1
------

* Set the Cliff namespace

1.12.0
------

* Wait logging thread and close the fd
* Use psutil to cleanup process
* Fix travis CI

1.11.4
------

* swift: use 127.0.0.1 instead of localhost for memcached

1.11.3
------

* gnocchi: run 4 api processes

1.11.2
------

* Remove deprecated parameters from server.properties
* gnocchi: allow any workers as possible
* Replace hacking with flake8 extensions

1.11.1
------

* Update wait\_for\_line for Kafka 1.0.0 server

1.11.0
------

* Update config for 0.11 kafka server
* Add leseb image in README.rst

1.10.5
------

* gnocchi: handle virtual env on API

1.10.4
------

* correct disk name

1.10.3
------

* create data directory for swift
* Push release to PyPI using Travis

1.10.2
------

* Fix Python 2 ProcessLookupError
* Handle terminate lookup error
* tests: call setUp to init cleanups
* postgresql: do not call \_exec in \_\_init\_\_
* Install mock for tests
* Remove not used oslotest dependency

1.10.1
------

* Fix process cleanup

1.10.0
------

* Ensure pifpaf kill all processes
* Fix compatibility with Redis 4.0

1.9.2
-----

* Revert "Ensure pifpaf kill all processes"

1.9.1
-----

* Ensure pifpaf kill all processes

1.9.0
-----

* Add a new driver for Vault

1.8.1
-----

* Fix logging in \_kill

1.8.0
-----

* memcached: don't read stdout
* swift: fix configuration typo

1.7.0
-----

* swiftclient default auth to 2.0
* swift: start a dedicated memcached

1.6.0
-----

* Disable elastic search tests
* Ensure xattr are available for swift
* swift: check we can upload file
* Use subprocess to kill process

1.5.2
-----

* Fix decorator order

1.5.1
-----

* Simplify retry logic
* Fix retry error catching

1.5.0
-----

* Wait 10 seconds processes to end, them kill them

1.4.11
------

* Revert "gnocchi: use --reuse-port"

1.4.10
------

* gnocchi: use --reuse-port
* Do not use concurrency to run tests
* Fix conflicting port in Gnocchi test
* Use another port for test\_gnocchi\_with\_redis\_coordinator
* Fix pep8 error

1.4.9
-----

* Revert "gnocchi: remove deprecated uwsgi option die-on-term"

1.4.8
-----

* gnocchi: ensure client don't use keepalive

1.4.7
-----

* gnocchi: add --no-orphans to uwsgi
* gnocchi: remove deprecated uwsgi option die-on-term

1.4.6
-----

* gnocchi: only run 1 metricd

1.4.5
-----

* gnocchi: add missing backslash in re

1.4.4
-----

* gnocchi: chdir to tempdir in uwsgi

1.4.3
-----

* Fix uwsgi wait for line

1.4.2
-----

* Revert "Make uwsgi loading module within a virtualenv"
* gnocchi: remove --plugin options

1.4.1
-----

* Make uwsgi loading module within a virtualenv
* Remove Python 3.4 support

1.4.0
-----

* Switch to uwsgi to run gnocchi-api
* elasticsearch: fix new versions option passing
* Add npm to Travis install

1.3.1
-----

* Fix logging being done on stdout instead of stderr

1.3.0
-----

* Stop using stevedore to load plugins

1.2.0
-----

* gnocchi: set verbose in config file to be sure info are printed
* Revert "gnocchi: pass --verbose to daemon to be sure they're in INFO mode"
* gnocchi: pass --verbose to daemon to be sure they're in INFO mode
* Use daiquiri to setup logging
* Fix error reporting in Python 3
* Move Ceph requirements to an extra entry
* Don't install xattr on win32 systems
* Revert "aodh: use database-url for gnocchi indexer"
* Set the actual dist for Travis
* aodh: use database-url for gnocchi indexer

1.1.0
-----

* aodh: add database-url

1.0.1
-----

* fix DEFAULT\_PORT\_COORDINATOR variable name

1.0.0
-----

* gnocchi: allow to use redis coordinator
* gnocchi: remove legacy resource types support

0.27.1
------

* etcd: fix http url

0.27.0
------

* gnocchi: enable debug mode when --debug is passed to pifpaf
* Pass debug option to drivers

0.26.0
------

* gnocchi: allow to use redis as storage
* gnocchi: switch to basic auth as noauth is deprecated

0.25.1
------

* fix s3/swift with username/password are None

0.25.0
------

* Add link to Swift in README
* gnocchi: unquote credentials for s3 backend
* Allow Swift as Gnocchi storage backend
* Add swift driver
* Fix tox-travis deprecated warning
* fix npm in travis

0.24.1
------

* gnocchi: Set statd old vars

0.24.0
------

* cli: fully segment all environ vars
* gnocchi: Add support to s3 backend
* tests: Fix a python3 bug
* travis: remove tarball from cache
* gnocchi: Reduce the metricd delays
* tests: fix env variable parsing
* Set a proper PS1 when invoked via eval
* Clean variables on exit
* gnocchi: stop setting old statsd conf var

0.23.0
------

* aodh: auth with basic against Gnocchi
* Revert "gnocchi: set auth\_mode = noauth"

0.22.0
------

* gnocchi: set auth\_mode = noauth

0.21.0
------

* Add support for Python 3.6
* aodh: fix authentication disabling with newer Aodh

0.20.0
------

* Revert "mysql: fix timezone"

0.19.0
------

* mysql: fix timezone

0.18.1
------

* Gnocchi >= 3.1 will not ship any config by default

0.18.0
------

* rabbit: use process group
* rabbit: put password for all hosts in the url
* Fix mysql gate
* travis: fix mysql install

0.17.0
------

* Implements the Kafka driver

0.16.0
------

* correctly decode application stdout

0.15.1
------

* doc: rabbitmq cluster is supported
* gnocchi: fix statds waiting line for gnocchi <3.0

0.15.0
------

* tests: allow to find zookeeper bins
* tests: fix s3rver tests
* tests: Don't run them in //
* ceph: don't use /dev/shm
* tests: Capture logging and print it on failure
* rabbitmq: fix waiting line
* ceph: last jewel point release have lowered object max len
* Revert "Partial revert for debug output"
* Make travis-ci happy again

0.14.0
------

* Bump hacking to 0.12
* Update influxdb.py
* gnocchi: start statsd daemon
* ceph: use shm and try to not really write data

0.13.0
------

* gnocchi: allow to run with an existing storage URL
* gnocchi: allow to run with an existing indexer URL
* ceph: increase rados object name limit for ext4 fs
* Fix a typo in README: gobal -> global
* Add MongoDB to README
* Set storage engine to mmapv1 when wiredtiger is not present

0.12.0
------

* Add support for s3rver

0.11.1
------

* fakes3: export HTTP url

0.11.0
------

* Mention CouchDB support in README
* Add support for CouchDB

0.10.5
------

* gnocchi: Catch a working line for metricd
* Fix virtualenv handling

0.10.4
------

* Revert "mysql: add --basedir=/usr"

0.10.3
------

* mysql: fix typo
* tests: fix mysqld database name
* mysql: use pifpaf as the name of the database
* mysql: add --basedir=/usr

0.10.2
------

* mysql: use mysql\_install\_db if mysqld --initialize-insecure fails

0.10.1
------

* mysql: add --no-defaults and --tmpdir to mysqld

0.10.0
------

* Indicate we support etcd clustering
* Support etcdctl
* etcd: add clustering support
* etcd: change default port to IANA and allow to change peer port
* Print PID of process when logging output

0.9.0
-----

* Support for Aodh 3

0.8.2
-----

* Better reporting on wait\_for\_line

0.8.1
-----

* Print actual output when we don't find the expected line

0.8.0
-----

* tests: fix a port collision
* tests: fix Popen usage with Python 3
* Fix Python 3
* Fix pep8 errors
* influxdb: fix wait\_for\_line with re
* ceph: fix output matching with re
* Gnocchi: bugfix on wait\_for\_line on API
* gnocchi: fix URL in waiting
* keystone: disable tests
* zookeeper: wait for ZooKeeper to start before returning
* Fix Redis driver with Redis 3.2.1
* drivers: support regexp for wait\_for\_line

0.7.0
-----

* gnocchi: support latest master/2.2 changes on gnocchi-api

0.6.0
-----

* aodh: run aodh-evaluator

0.5.0
-----

* Install software via tox
* keystone: simplify wait for line for admin
* drivers: translate OSError to a more readable error
* keystone: simplify wait\_for\_line
* keystone: fix pep8 error in test
* Add a Keystone driver
* Better debugging on errors
* Add a pifpaf\_stop function to stop pifpaf
* Fix typo in InfluxDB driver

0.4.0
-----

* influxdb: fix Python >= 3.0 & < 3.5
* travis: Remove missing etcd from install
* travis: install InfluxDB with wget
* Add PyPI version badge

0.3.0
-----

* postgresql: allow to configure host, set to none by default
* aodh: set AODH\_ENDPOINT for aodh client

0.2.1
-----

* gnocchi: fix a regression on variable names

0.2.0
-----

* mysql: add URL as an attribute
* Add consul daemon support
* Rework exceptions formatting using logging
* drivers: raise a RuntimeError rather than an AssertionError
* Report a correct error when unable to start a command

0.1.0
-----

* Partial revert for debug output
* Export chain of connection strings in PIFPAF\_URLS
* Remove spurious line in README
* Allow to change environment variable prefix

0.0.11
------

* mongodb: add database name in URL

0.0.10
------

* The pbr name is home-page rather than url
* check into virtualenv first for configuration file
* Improve exception handling

0.0.9
-----

* ceph: fix config for last jewel
* Fix typo
* Fix a few typos in README
* Add some docs
* Add support for fakes3

0.0.8
-----

* Enable testing of Gnocchi legacy
* postgres: replace template1 by postgres

0.0.7
-----

* Export Gnocchi client variables
* Make RabbitMQ tests work on OS X
* rabbitmq: Allow to use rabbitmqctl and kill node
* ceph: git url have moved
* Add RabbitMQ in README
* Enable mongodb tests
* Add rabbitmq drivers
* Enhance travis build
* Allow to print debug during tests
* Fix pep8 error

0.0.6
-----

* aodh: add support for gnocchi --create-legacy-resource-types
* gnocchi: support --create-legacy-resource-types
* mysql: add /usr/libexec to PATH

0.0.5
-----

* Add ceph driver
* Fix test\_cli when memcached is absent
* Fix travis

0.0.4
-----

* Export all variables even in eval mode
* aodh: randomize Gnocchi user/project and export them
* Don't call cleanup twice if \_setUp fail

0.0.3
-----

* Fix Aodh and Gnocchi ports

0.0.2
-----

* Provide better debug info

0.0.1
-----

* No notify for now
* Fix return value on command failure
* Do not use shell mode in command
* Fix return code
* Run tox in verbose mode
* Aodh 2.0 only
* Install gnocchi and aodh as part as tox for testing
* Do not use feature yet on Aodh
* Install aodh on Travis
* Remove unused variable
* Add Aodh support
* Add Gnocchi entry
* Look for config files in ~/.local/etc
* Install the right flavor for Gnocchi
* Add TRAVIS in passenv
* Set TRAVIS=1
* Set TRAVIS=1
* Install Gnocchi for testing in travis
* Gnocchi support
* Fix ES condition
* Document eval based usage
* Fix py3
* Fix test\_cli on Py3
* Disable pypy
* Fix test\_cli on some Python
* Remove broken ES version check
* Skip ES on Travis
* Fix test\_eval
* Fix pep8
* Fix var export format
* travis: install ES
* Print ES version in Travis
* elasticsearch: disable tests on travis
* Fix bytes format on Python 3.4
* tests: fix putenv
* tests: set PATH for drivers tests
* elasticsearch: fix path
* elasticsearch: include path for Ubuntu
* redis: make stdin bytes
* Fix pep8
* Check for executables
* Kill pifpaf after test
* Revert "travis: use apt-get install since some packages are blacklisted by apt addons"
* travis: use apt-get install since some packages are blacklisted by apt addons
* Install etcd
* Install missing packages for Travis
* Add os-testr for subunit-trace
* Add build status
* Add Travis
* Import
