<StackLayout class="peek-details-section">

    <GridLayout columns="*, auto" rows="auto" class="peek-details-section">
        <TextField class="details-section-value editable"
                   autocorrect="false"
                   (ngModelChange)="searchKeywordOnChange($event)"
                   hint="search" [(ngModel)]="searchString"
                   returnKeyType="search"
                   returnPress="find()">
        </TextField>

        <Button class="btn fa"
                col="1" text="Find" (tap)="find()"
                *ngIf="offlineSearchEnabled()"
                [isEnabled]="!searchInProgress"
                [class.nav-section-btn-disabled]="searchInProgress"></Button>
    </GridLayout>

    <!-- START SEARCH PROPERTY PICKER -->
    <GridLayout columns="*, auto" rows="auto, auto">
        <Label col="0" class="details-section-title" text="Property:"></Label>
        <ListPicker col="0"
                    #propertyPicker class="p-15"
                    *ngIf="searchPropertyNsPicking"
                    [items]="searchPropertyStrings"
                    (selectedIndexChange)="nsSelectProperty(propertyPicker.selectedIndex)">
        </ListPicker>
        <Label row="1" col="0"
               class="details-section-value"
               *ngIf="!searchPropertyNsPicking"
               [text]="searchProperty.title"></Label>
        <!-- The edit / save buttons -->
        <Button row="1" col="1"
                class="btn fa"
                [text]="nsEditPropertyFonticon() | fonticon"
                (tap)="searchPropertyNsPicking = !searchPropertyNsPicking">
        </Button>
    </GridLayout>
    <!-- END SEARCH PROPERTY PICKER -->

    <!-- START SEARCH OBJECT TYPE PICKER -->
    <GridLayout columns="*, auto" rows="auto, auto">
        <Label col="0" class="details-section-title" text="Object Type:"></Label>
        <ListPicker col="0"
                    #objectTypePicker class="p-15"
                    *ngIf="searchObjectTypesNsPicking"
                    [items]="searchObjectTypeStrings"
                    (selectedIndexChange)="nsSelectObjectType(objectTypePicker.selectedIndex)">
        </ListPicker>
        <Label row="1" col="0"
               class="details-section-value"
               *ngIf="!searchObjectTypesNsPicking"
               [text]="searchObjectType.title"></Label>
        <!-- The edit / save buttons -->
        <Button row="1" col="1"
                class="btn fa"
                [text]="nsEditObjectTypeFonticon() | fonticon"
                (tap)="searchObjectTypesNsPicking = !searchObjectTypesNsPicking">
        </Button>
    </GridLayout>
    <!-- END SEARCH OBJECT TYPE PICKER -->


    <Label *ngIf="noResults()" text="No results."></Label>

    <Label *ngIf="searchInProgress" text="Search in progress."></Label>
    <ActivityIndicator *ngIf="searchInProgress" [busy]="1"></ActivityIndicator>

    <GridLayout *ngIf="!noResults()">
        <ListView [items]="resultObjects">
            <ng-template let-item="item" let-i="index" let-odd="odd" let-even="even">
                <plugin-search-result [resultObject]="item"></plugin-search-result>
            </ng-template>
        </ListView>
    </GridLayout>
</StackLayout>