{"parents": [], "prev": {"link": "../rpcs/", "title": "Using NETCONF RPCs"}, "next": {"link": "../tasks/", "title": "Using Replays for repeated workflows"}, "title": "Working with NETCONF Notification Streams", "meta": {}, "body": "<div class=\"section\" id=\"working-with-netconf-notification-streams\">\n<h1>Working with NETCONF Notification Streams<a class=\"headerlink\" href=\"#working-with-netconf-notification-streams\" title=\"Permalink to this headline\">\u00b6</a></h1>\n<p>Notification streams are a mechanism that allows users to recieve data from a\nnetwork device when specific events occur. The basic concept is that the user\nopens a NETCONF session, subscribes to a notification stream, and waits for\nstream events to occur in the open session. When the session is ended, the\nstream is no longer active.</p>\n<div class=\"section\" id=\"opening-s-netconf-session\">\n<h2>Opening s NETCONF Session<a class=\"headerlink\" href=\"#opening-s-netconf-session\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>To start, you must have an active NETCONF session with the device.\nSelect the device from the \u201cDevices\u201d dropdown, then click \u201cOpen device window\u201d.</p>\n<img alt=\"Screenshot showing a window indicating that the NETCONF session has successfully started.\" src=\"../_images/device-window-no-session.png\" />\n<p>Next, click \u201cStart session\u201d in order to establish an active NETCONF session.</p>\n<img alt=\"Screenshot showing a window indicating that the NETCONF session has successfully started.\" src=\"../_images/device-window-with-session.png\" />\n<p>Cisco devices support <a class=\"reference external\" href=\"https://tools.ietf.org/html/draft-ietf-netconf-netconf-event-notifications-22\">draft-ietf-netconf-netconf-event-notifications</a> (not an official RFC)\nusing the ietf-event-notifications model.</p>\n<p>With the device window open and a session established, you can then construct\nNETCONF subscription messages using the ietf-event-notifications model from a\nYANG module set (see: \u201cDefining a YANG Module Set). Once you have set values\nidentifing the stream you wish to recieve events from, click on \u201cBuild RPC\u201d\nfollowed by \u201cRun RPC\u201d. The subscription message will be sent through the open\nsession.</p>\n<img alt=\"Screenshot showing a window with ietf-event-notification module.\" src=\"../_images/subscription.png\" />\n</div>\n<div class=\"section\" id=\"netconf-rfc-5277-notification-streams\">\n<h2>NETCONF RFC 5277 Notification Streams<a class=\"headerlink\" href=\"#netconf-rfc-5277-notification-streams\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>YANG Suite also supports <a class=\"reference external\" href=\"https://tools.ietf.org/html/rfc5277\">RFC 5277</a>\n(NETCONF Event Notifications) for supported devices.\nIf your device supports notifications, YANG Suite provides ready-made actions\nto list the supported notification event streams or subscribe to a specific\nevent stream.</p>\n<p>To start, you must have an active NETCONF session with the device.\nSelect the device from the \u201cDevices\u201d dropdown, then click \u201cOpen device window\u201d.\nNext, click \u201cStart session\u201d in order to establish an active NETCONF session.</p>\n<img alt=\"Screenshot showing a window indicating that the NETCONF session has successfully started.\" src=\"../_images/device-window-with-session.png\" />\n<p>In this window, use the \u201cActions\u201d menu and select the \u201cget streams\u201d action in\norder to automatically send the NETCONF RPC used to query for supported\nevent streams.</p>\n<img alt=\"Screenshot showing the &quot;Actions&quot; menu, with &quot;get streams&quot; selected.\" src=\"../_images/actions-get-streams.png\" />\n<p>If your device <em>does not</em> support notifications, you will see an error response\nfrom the device, as in the below example:</p>\n<img alt=\"Screenshot showing error reply indicating that the device doesn't support notifications\" src=\"../_images/no-support-notify.png\" />\n<p>If your device <em>does</em> support notifications, you should receive a success reply\ncontaining a list of the supported event streams, as in the below example,\nwhich shows a device reporting that it supports two streams,\n\u201cNETCONF\u201d and \u201csnmpevents\u201d.</p>\n<img alt=\"Screenshot showing success reply listing the event streams supported by the device\" src=\"../_images/support-notify.png\" />\n<p>You can subscribe to any given event stream by selecting \u201cSubscribe\u201d from the\nActions menu. A dialog box will pop up prompting you to enter the name of the\ndesired stream.</p>\n<img alt=\"Screenshot showing dialog prompting for stream name\" src=\"../_images/subscribe-notify.png\" />\n<p>Enter the name of the stream and click \u201cSubscribe\u201d. You should see the\n\u201ccreate-subscription\u201d RPC being sent and acknowledged by the device.</p>\n<p>I subscribed to the \u2018snmpevents\u2019 event stream and I can see them being\ndisplayed in the window as they happen:</p>\n<img alt=\"Screenshot showing a window with the events from the subscribed stream\" src=\"../_images/notify-events.png\" />\n<p>Currently the only supported way to stop an event stream subscription is to\nclose the NETCONF session to the device, either by clicking \u201cEnd Session\u201d\nor by closing the session window altogether.</p>\n</div>\n</div>\n", "metatags": "", "rellinks": [["genindex", "General Index", "I", "index"], ["tasks", "Using Replays for repeated workflows", "N", "next"], ["rpcs", "Using NETCONF RPCs", "P", "previous"]], "sourcename": "notifications.rst.txt", "toc": "<ul>\n<li><a class=\"reference internal\" href=\"#\">Working with NETCONF Notification Streams</a><ul>\n<li><a class=\"reference internal\" href=\"#opening-s-netconf-session\">Opening s NETCONF Session</a></li>\n<li><a class=\"reference internal\" href=\"#netconf-rfc-5277-notification-streams\">NETCONF RFC 5277 Notification Streams</a></li>\n</ul>\n</li>\n</ul>\n", "display_toc": true, "page_source_suffix": ".rst", "current_page_name": "notifications", "sidebars": ["about.html", "navigation.html", "relations.html", "searchbox.html", "donate.html"], "customsidebar": null, "alabaster_version": "0.7.12"}