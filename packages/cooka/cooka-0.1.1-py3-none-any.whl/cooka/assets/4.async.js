(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"S8+r":function(e,t,a){e.exports={titleContainer:"titleContainer___1HQup",main:"main___1bQL8",process:"process___2Rb00",fileUpload:"fileUpload___4tZIw",tips:"tips___1VKTA",stepTitle:"stepTitle___2Nhz9",stepTips:"stepTips___1vK3h",bar:"bar___1EZ-O",number:"number___2e1lt",type:"type___CEmgz",date:"date___39nhK",text:"text___1TSkP",legend:"legend___2-6u8",numberCir:"numberCir___3uWFz",typeCir:"typeCir___1iUNg",dateCir:"dateCir___9SH50",textCir:"textCir___3FzT8",symbol:"symbol___3_kHV",comment:"comment___2tVTF"}},yLM6:function(e,t,a){"use strict";a.r(t);a("IzEo");var s=a("bx4M"),l=(a("sPJy"),a("bE4q")),o=(a("7Kak"),a("9yH6")),n=(a("y8nQ"),a("Vl3Y")),r=a("qIgq"),c=a.n(r),i=a("q1tI"),p=a.n(i),m=a("/MKj"),u=a("Ty5D"),d=(a("3a4m"),a("+L6B"),a("2/Rp")),b=(a("5Dmo"),a("3S7+")),_=(a("5NDa"),a("5rEg")),S=a("p0pE"),f=a.n(S),g=a("S8+r"),j=a.n(g),O=a("LLXN"),E=a("olQp"),y=a("7/+/"),h=a("ygAv"),v=a("V6UL"),F=e=>{var t=e.dispatch,a=e.location,l=e.importFile.pollJobResponse,o=n["a"].useForm(),r=c()(o,1),m=r[0],u=Object(i["useState"])("whole_data"),S=c()(u,2),g=S[0],F=S[1],M=Object(i["useState"])(50),T=c()(M,2),x=T[0],I=T[1],w=Object(i["useState"])(y["StepStatusIcon"]["todo"]),C=c()(w,2),N=C[0],k=C[1],D=Object(i["useState"])(y["StepStatusIcon"]["todo"]),z=c()(D,2),L=z[0],R=z[1],J=Object(i["useState"])(y["StepStatusIcon"]["todo"]),U=c()(J,2),V=U[0],q=U[1],B=Object(i["useState"])(Object(O["formatMessage"])({id:"upload.prepare"})),K=c()(B,2),H=K[0],P=K[1],Q=Object(i["useState"])(Object(O["formatMessage"])({id:"upload.prepare"})),A=c()(Q,2),X=A[0],Z=A[1],G=Object(i["useState"])(Object(O["formatMessage"])({id:"upload.prepare"})),W=c()(G,2),Y=W[0],$=W[1],ee=Object(i["useState"])(""),te=c()(ee,2),ae=te[0],se=te[1],le=Object(i["useState"])(!0),oe=c()(le,2),ne=oe[0],re=oe[1],ce=Object(i["useState"])(null),ie=c()(ce,2),pe=ie[0],me=ie[1],ue=Object(i["useState"])(!1),de=c()(ue,2),be=de[0],_e=de[1],Se=e=>{me(e),_e(!0)},fe=()=>{_e(!1),me(null)};Object(i["useEffect"])(()=>{if(null!==l&&void 0!==l){var e=l.data,t=Object(h["d"])(e.steps);Object(E["checkoutStepFromStepsDict"])(t,y["ImportStepType"].copy,e=>{var t=e["took"],a=e.extension.file_size;"succeed"===e.status?(k(y["StepStatusIcon"]["done"]),P("".concat(Object(O["formatMessage"])({id:"upload.hintUploadFile"},{elapsed:t.toFixed(2),fileSize:Object(h["b"])(a)}))),R(y["StepStatusIcon"]["doing"]),Z(Object(O["formatMessage"])({id:"upload.loading"}))):"failed"===e.status&&(R(y["StepStatusIcon"]["undone"]),P(Object(O["formatMessage"])({id:"upload.fail"})))}),Object(E["checkoutStepFromStepsDict"])(t,y["ImportStepType"].load,e=>{var t=e.status,a=e.extension.n_cols,s=(e.extension.n_cols_used,e.extension.n_rows),l=e.extension.n_rows_used,o=e.took;"succeed"===t?(R(y["StepStatusIcon"]["done"]),Z("".concat(Object(O["formatMessage"])({id:"upload.hintLoadData"},{elapsed:o.toFixed(2),nRows:s,nColumns:a,nRowsUsed:l}))),q(y["StepStatusIcon"]["doing"]),$(Object(O["formatMessage"])({id:"upload.analysising"}))):"failed"===t&&(R(y["StepStatusIcon"]["undone"]),Z(Object(O["formatMessage"])({id:"upload.fail"})))}),Object(E["checkoutStepFromStepsDict"])(t,y["ImportStepType"].analyze,e=>{var t=e.extension.feature_summary.categorical,a=e.extension.feature_summary.continuous,s=e.extension.feature_summary.datetime,l=e.took,o=e.status;"succeed"===o?(q(y["StepStatusIcon"]["done"]),R(y["StepStatusIcon"]["done"]),$("".concat(Object(O["formatMessage"])({id:"upload.hintAnalysis"},{elapsed:l.toFixed(2),nContinuous:a,nCategorical:t,nDatetime:s})))):"failed"===o&&(q(y["StepStatusIcon"]["undone"]),$(Object(O["formatMessage"])({id:"import.fail"})))})}},[l]);var ge=e=>{isNaN(e)||I(e)},je=(e,t)=>{var a;return function(){var s=this,l=arguments;a||(a=setTimeout(function(){e.apply(s,l),a=null},t))}},Oe=e=>{null!=e&&e.length>0&&(se(e),t({type:"importFile/testImportFile",payload:{path:e}}))},Ee=(je(Oe,100),()=>{k(y["StepStatusIcon"]["doing"]);var e="random_rows"===g?{n_rows:m.getFieldsValue().n_rows,percentage:""}:{percentage:x,n_rows:""},s=f()({sample_strategy:g},e,{file_path:ae,source_type:a.query.sourceType,upload_took:10});t({type:"importFile/createTempDataset",payload:s})}),ye=e=>{var t=e.target.value;se(t),null!==t&&void 0!==t&&t.length>0&&Object(v["q"])(t).then(e=>{if(0===e.code)re(!1),fe();else{var t=e.data.message;console.info("hhhhh"),console.info(t),console.info(be),Se(t),re(!0)}})},he=e=>{};return p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:j.a.main},Object(E["makeSampleDiv"])(F,g,m,ge,x),p.a.createElement("div",{className:j.a.fileUpload},p.a.createElement("dl",null,p.a.createElement("dt",null,Object(O["formatMessage"])({id:"import.address"}))),p.a.createElement(s["a"],{style:{width:"85%"}},Object(E["makeCsvFileTip"])(),p.a.createElement(b["a"],{trigger:["focus"],title:pe,visible:be,color:"#FFF2F0",placement:"right"},p.a.createElement(_["a"],{style:{width:300},onChange:ye,onBlur:he,placeholder:"File path in server ",maxLength:256,minLength:0})),p.a.createElement("br",null),p.a.createElement(d["a"],{type:"primary",disabled:ne,style:{marginTop:10},onClick:Ee},Object(O["formatMessage"])({id:"import.analysis"}))))),p.a.createElement("div",{className:j.a.process},p.a.createElement("dl",null,p.a.createElement("dt",null,N,p.a.createElement("span",{className:j.a.stepTitle},"1. ",Object(O["formatMessage"])({id:"import.copy"}))),p.a.createElement("dd",{className:j.a.stepTips},H)),p.a.createElement("dl",null,p.a.createElement("dt",null,L,p.a.createElement("span",{className:j.a.stepTitle},"2. ",Object(O["formatMessage"])({id:"upload.loadData"}))),p.a.createElement("dd",{className:j.a.stepTips},X)),p.a.createElement("dl",null,p.a.createElement("dt",null,V,p.a.createElement("span",{className:j.a.stepTitle},"3. ",Object(O["formatMessage"])({id:"upload.analysisData"}))),p.a.createElement("dd",{className:j.a.stepTips},Y))))},M=Object(u["o"])(Object(m["c"])(e=>{var t=e.importFile;return{importFile:t}})(F)),T=a("X/SJ"),x=a("5ahD"),I=Object(u["o"])(Object(m["c"])(e=>{var t=e.importFile;return{pollJobResponse:t.pollJobResponse}})(E["CreateDatasetFormPage"])),w=e=>{var t=e.importFile.pollJobResponse,a=(e.dispatch,n["a"].useForm()),r=c()(a,1),m=r[0],u=Object(i["useState"])("a"),d=c()(u,2),b=d[0],_=d[1],S=Object(i["useState"])(null),f=c()(S,2),g=(f[0],f[1],Object(i["useState"])(null)),h=c()(g,2),v=h[0],F=h[1],w=Object(i["useState"])(null),C=c()(w,2),N=(C[0],C[1],Object(i["useState"])(!1)),k=c()(N,2),D=k[0],z=k[1],L={a:p.a.createElement(M,null),b:p.a.createElement(T["default"],{datasetName:v}),c:p.a.createElement(x["default"],{datasetNameFromParam:v,isTemporary:!0})};Object(i["useEffect"])(()=>{Object(E["checkoutStepFromResponse"])(t,y["UploadStepType"].analyze,e=>{"succeed"===e.status&&(F(t.data.temporary_dataset_name),z(!0))})},[t]);var R=p.a.createElement(I,null),J=e=>{_(e.target.value)},U=p.a.createElement(o["a"].Group,{onChange:J,defaultValue:b},p.a.createElement(o["a"].Button,{value:"a"},Object(O["formatMessage"])({id:"import.import"})),D&&p.a.createElement(p.a.Fragment,null,p.a.createElement(o["a"].Button,{value:"b"},Object(O["formatMessage"])({id:"extra.preview"})),p.a.createElement(o["a"].Button,{value:"c"},Object(O["formatMessage"])({id:"extra.dataExplore"}))));return p.a.createElement(n["a"],{form:m,initialValues:{n_rows:1e3}},p.a.createElement("div",{className:j.a.breadcrumb},p.a.createElement(l["a"],null,p.a.createElement(l["a"].Item,null,p.a.createElement("a",{href:"/"},Object(O["formatMessage"])({id:"extra.dataset"}))),p.a.createElement(l["a"].Item,null,Object(O["formatMessage"])({id:"extra.new"})),p.a.createElement(l["a"].Item,null,Object(O["formatMessage"])({id:"import.import"})))),p.a.createElement(s["a"],{title:U,extra:R,style:{paddingBottom:60}},L[b]))};t["default"]=Object(u["o"])(Object(m["c"])(e=>{var t=e.importFile,a=e.dataset;return{importFile:t,dataset:a}})(w))}}]);